!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=require("express")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).Server.start()},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function i(e){try{s(r.next(e))}catch(e){u(e)}}function a(e){try{s(r.throw(e))}catch(e){u(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var i=u(n(0)),a=u(n(3)),s=n(4),c=n(7),l=new(function(){function e(){this.app=i.default(),this._foods=process.env.FOODS.split(":")}return e.prototype._config=function(){this.app.set("port",process.env.PORT||"3000"),this.app.use(a.default("dev")),this.app.use(i.default.json()),this.app.use(i.default.urlencoded({extended:!1})),this.app.use((function(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Authorization, Content-Type"),n()})),s.applyRoutes(this.app)},e.prototype._mail=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return this._foods.forEach((function(e){c.cronJob(0,e)})),[2]}))}))},e.prototype.start=function(){var e=this;this._config(),this.app.listen(this.app.get("port"),(function(){return console.log("Server running at port "+e.app.get("port"))})),this._mail()},e}());t.Server=l},function(e,t){e.exports=require("morgan")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyRoutes=void 0;var r=n(5);t.applyRoutes=function(e){e.use("/",r.Home)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Home=void 0;var r=n(0),o=n(6),u=r.Router();t.Home=u,u.route("").get((function(e,t){o.response(!1,"Karolay, I love you!",t,200)}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.response=void 0;t.response=function(e,t,n,r){n.status(r).send({error:e,message:t})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function i(e){try{s(r.next(e))}catch(e){u(e)}}function a(e){try{s(r.throw(e))}catch(e){u(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cronJob=void 0;var i=n(8),a=u(n(9)),s=n(10),c=process.env.TIMEZONE,l=process.env.TIME_BREAKFAST.split(":"),f=process.env.TIME_LUNCH.split(":"),p=process.env.TIME_DINNER.split(":"),d=a.default().set({hour:parseInt(l[0]),milliseconds:parseInt(l[3]),minute:parseInt(l[1]),second:parseInt(l[2])}).tz(c),h=a.default().set({hour:parseInt(f[0]),milliseconds:parseInt(f[3]),minute:parseInt(f[1]),second:parseInt(f[2])}).tz(c),v=a.default().set({hour:parseInt(p[0]),milliseconds:parseInt(p[3]),minute:parseInt(p[1]),second:parseInt(p[2])}).tz(c),y=function(e,t,n,u){return new i.CronJob(a.default(e.format()).add(30,"seconds"),(function(){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.mailer(!1,t,null,u)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),console.error(e),[3,3];case 3:return[2]}}))}))})).start(),console.log(e),new i.CronJob(e,(function(){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.mailer(!0,t,n,u)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),console.error(e),[3,3];case 3:return[2]}}))}))}),null,!1,c)},b=function(e,t){var n=function(e){switch(e){case"breakfast":return d;case"lunch":return h;case"dinner":return v;default:return}}(t);if(n>a.default())switch(e){case 0:y(n,t,"Hey honey, don't forget to have your "+t+"!",e+1).start();break;case 1:y(n,t,"Hey honey, have you eaten your "+t+"? Time is running!",e+1).start(),n.add(15,"minutes"),b(2,t);break;case 2:y(n,t,"Hey honey! It's almost time, are you having "+t+"?",e+1).start(),n.add(15,"minutes"),b(3,t);break;case 3:y(n,t,"Hey honey! You should be eating your "+t+" right now, I hope your are, I love you.",e+1).start()}};t.cronJob=b},function(e,t){e.exports=require("cron")},function(e,t){e.exports=require("moment-timezone")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function i(e){try{s(r.next(e))}catch(e){u(e)}}function a(e){try{s(r.throw(e))}catch(e){u(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mailer=void 0;var i=u(n(11)),a=process.env,s=a.EMAIL_RECEPTOR_1,c=a.EMAIL_RECEPTOR_2,l=a.EMAIL_SENDER,f=a.PASSWORD;t.mailer=function(e,t,n,u){return void 0===u&&(u=null),r(void 0,void 0,void 0,(function(){var r,a,p,d,h;return o(this,(function(o){switch(o.label){case 0:switch(a=i.default.createTransport({auth:{pass:f,user:l},service:"Gmail"}),t){case"breakfast":r="BREAKFAST TIME!";break;case"lunch":r="LUNCH TIME!";break;case"dinner":r="DINNER TIME!";break;default:r="Mail delivered to Karolay"}p=e?{from:"Your bbsito <"+l+">",sender:l,subject:r,text:n,to:s}:{from:"Heroku server <"+l+">",sender:l,subject:r,text:"Food: "+t+".\nAttempt: "+u+".",to:c},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.sendMail(p)];case 2:return d=o.sent(),console.log("Everything went ok"),console.log(d),[3,4];case 3:throw h=o.sent(),console.error(h),new Error("Error while sending the email.");case 4:return[2]}}))}))}},function(e,t){e.exports=require("nodemailer")}]);